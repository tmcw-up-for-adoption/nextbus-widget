<!DOCTYPE html>
<html>
    <head>
        <title>NextBus Widget</title>
        <meta http-equiv='content-type' content='text/html; charset=utf-8' />
        <meta name='viewport' content='initial-scale=1.0 maximum-scale=1.0'>
        <style>
        body {
            margin:0 auto;
            max-width:400px;
            font:normal 15px/20px 'Helvetica Neue', sans-serif;
        }
        ul {
            list-style-type:none;
            margin:0;
            padding:0;
        }
        li {
            padding:5px 0;
            border-bottom:1px solid #000;
        }
        a {
            color:blue;
            text-decoration:none;
        }
        </style>
    </head>
    <body>
        <h1>nextbus-widget</h1>
        <p><a href='http://github.com/tmcw/nextbus-widget'>mostly an open source project - this page is just a demo.</a></p>
        <div id='nextbus'>
        </div>
        <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
        <script src='nextbus.js'></script>
        <script>
        var every = 1000 * 60 * 2;
        nextbusRequest()
            .stop(1001538)
            .key('c23qpgm7cxvc47fvw4zx57ht')
            .every(every)
            .proxy(function(url) {
                return 'http://hidden-cove-3992.herokuapp.com/?url=' +
                    encodeURIComponent(url) + '&freshness=' + every;
            })
            .then(function(data) {
                d3.select('#nextbus').datum(data).call(nextbus());
            })
            .start();
        </script>
    </body>
</html>

